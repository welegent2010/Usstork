import{y as T,b as c,k as v,z as o}from"./index-cee74b2b.js";const k=T("trades",()=>{const n=c({}),d=c([]),u=c(!1),t=c(null),y=v(()=>Object.keys(n.value).length>0),l=async()=>{var s,r;u.value=!0,t.value=null;try{const e=await o.get("/trades");return n.value=e.data.trades,d.value=e.data.allTrades,{success:!0}}catch(e){return t.value=((r=(s=e.response)==null?void 0:s.data)==null?void 0:r.error)||"获取交易数据失败",{success:!1,error:t.value}}finally{u.value=!1}};return{trades:n,allTrades:d,loading:u,error:t,hasTrades:y,fetchTrades:l,addTrade:async s=>{var r,e;try{const a=await o.post("/trades",s);return await l(),{success:!0,trade:a.data}}catch(a){return{success:!1,error:((e=(r=a.response)==null?void 0:r.data)==null?void 0:e.error)||"添加交易失败"}}},simulateTrade:async(s,r,e,a=8)=>{var p,i;try{return{success:!0,data:(await o.post(`/trades/simulate/${s}`,{currentPrice:r,addShares:e,fee:a})).data}}catch(f){return{success:!1,error:((i=(p=f.response)==null?void 0:p.data)==null?void 0:i.error)||"模拟计算失败"}}},getStockTrades:async s=>{var r,e;try{return{success:!0,data:(await o.get(`/trades/${s}`)).data}}catch(a){return{success:!1,error:((e=(r=a.response)==null?void 0:r.data)==null?void 0:e.error)||"获取股票交易数据失败"}}}}});export{k as u};
