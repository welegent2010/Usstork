import{y as T,b as o,k as h,z as t}from"./index-7cc314ad.js";const S=T("trades",()=>{const n=o({}),l=o([]),d=o(!1),c=o(null),f=h(()=>Object.keys(n.value).length>0),u=async()=>{var a,r;d.value=!0,c.value=null;try{const e=await t.get("/trades");return n.value=e.data.trades,l.value=e.data.allTrades,{success:!0}}catch(e){return c.value=((r=(a=e.response)==null?void 0:a.data)==null?void 0:r.error)||"获取交易数据失败",{success:!1,error:c.value}}finally{d.value=!1}};return{trades:n,allTrades:l,loading:d,error:c,hasTrades:f,fetchTrades:u,addTrade:async a=>{var r,e;try{const s=await t.post("/trades",a);return await u(),{success:!0,trade:s.data}}catch(s){return{success:!1,error:((e=(r=s.response)==null?void 0:r.data)==null?void 0:e.error)||"添加交易失败"}}},simulateTrade:async(a,r,e,s=8)=>{var p,i;try{return{success:!0,data:(await t.post(`/trades/simulate/${a}`,{currentPrice:r,addShares:e,fee:s})).data}}catch(y){return{success:!1,error:((i=(p=y.response)==null?void 0:p.data)==null?void 0:i.error)||"模拟计算失败"}}},getStockTrades:async a=>{var r,e;try{return{success:!0,data:(await t.get(`/trades/${a}`)).data}}catch(s){return{success:!1,error:((e=(r=s.response)==null?void 0:r.data)==null?void 0:e.error)||"获取股票交易数据失败"}}},deleteStock:async a=>{var r,e;try{const s=await t.delete(`/trades/${a}`);return await u(),{success:!0,deletedCount:s.data.deletedCount}}catch(s){return{success:!1,error:((e=(r=s.response)==null?void 0:r.data)==null?void 0:e.error)||"删除股票失败"}}}}});export{S as u};
